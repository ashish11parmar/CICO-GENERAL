<!-- <div class="row" *ngIf="isExport">
    <div class="col-12 mb-3 text-end">
        <button mat-raised-button color="primary" (click)="download()">
            <mat-icon class="me-1">account_balance</mat-icon> Process Salary</button>
    </div>
</div> -->
<div class="row" id="calender-skeletone-loader" *ngIf="_loader">
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
  <div class="rect-card">
    <ngx-skeleton-loader> </ngx-skeleton-loader>
  </div>
</div>
<div class="table_scrollable" [hidden]="_loader && dataSource.length == 0">
  <table mat-table class="w-100" [dataSource]="dataSource" multiTemplateDataRows matSort>
    <ng-container matColumnDef="sr no">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">Sr No</th>
      <td mat-cell *matCellDef="let logs; let i = dataIndex" class="table_detail text_capital">
        {{ i + 1 + myPaginator.pageIndex * myPaginator.pageSize }}
      </td>
    </ng-container>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">
        Name
      </th>
      <td mat-cell *matCellDef="let logs" class="table_detail text_capital">
        {{ logs.display_name }}
      </td>
    </ng-container>
    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">
        Date
      </th>
      <!-- <td mat-cell *matCellDef="let logs" class="table_detail text_capital">{{logs.date | date : 'MM/dd/YYYY'}}</td> -->
      <td mat-cell *matCellDef="let logs" class="table_detail text_capital">
        {{ logs.workData ? logs.workData.clockDate ? (logs.workData.clockDate | date : "dd/MM/yyyy") : '-' : '-' }}
      </td>
    </ng-container>
    <ng-container matColumnDef="clockIn">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">Clock In</th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        {{ logs.workData ? logs.workData.clockIn ? (logs.workData.clockIn | timezoneConverter: timeZone ) : '-' :
        '-'}}
      </td>
      <!-- appTimezoneConverter="'Asia/Kolkata'" -->
    </ng-container>
    <ng-container matColumnDef="clockOut">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head" m>Clock Out</th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        {{ logs.workData ? logs.workData.clockOut ? (logs.workData.clockOut === '0000-00-00 00:00:00' ? '-' :
        logs.workData.clockOut | timezoneConverter: timeZone) : '-' :
        '-'}}
      </td>
    </ng-container>
    <ng-container matColumnDef="breakStart">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">Break Start</th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        {{ logs.workData ? logs.workData.startBreak ? (logs.workData.startBreak === '0000-00-00 00:00:00' ? '-' :
        logs.workData.startBreak | timezoneConverter: timeZone) :
        '-' : '-'}}
      </td>
    </ng-container>
    <ng-container matColumnDef="breakStop">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">Break Stop</th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        {{ logs.workData ? logs.workData.stopBreak ? (logs.workData.stopBreak === '0000-00-00 00:00:00' ? '-' :
        logs.workData.stopBreak | timezoneConverter: timeZone) : '-'
        : '-'}}
      </td>
    </ng-container>
    <ng-container matColumnDef="workDuration">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">
        Total Work Durations
      </th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        {{ logs.workData ? logs.workData.workDuration ? logs.workData.workDuration : '-' : '-'}}
      </td>
    </ng-container>
    <ng-container matColumnDef="breakDuraion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">
        Total Break Durations
      </th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        {{ logs.workData ? logs.workData.breakDuration ? logs.workData.breakDuration : '-' : '-'}}
      </td>
    </ng-container>
    <ng-container matColumnDef="toggle1">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head"
        [hidden]="dataSource.filteredData[0].clockDisable">
        clock in/out
      </th>
      <td mat-cell *matCellDef="let logs" class="table_detail dashboard_toggle"
        [hidden]="dataSource.filteredData[0].clockDisable">
        <mat-slide-toggle color="primary" [checked]="logs.isClock" [disabled]="
            (!logs.isClock && (logs.isDisable || !logs.isBreak)) ||
            logs.clockDisable
          ">
        </mat-slide-toggle>
        <!-- </mat-slide-toggle> -->
      </td>
    </ng-container>
    <ng-container matColumnDef="toggle2">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head" mat-sort-header
        [hidden]="dataSource.filteredData[0].clockDisable">
        start/stop break
      </th>
      <td mat-cell *matCellDef="let logs" class="table_detail dashboard_toggle"
        [hidden]="dataSource.filteredData[0].clockDisable">
        <mat-slide-toggle color="primary" [checked]="logs.isBreak" [disabled]="
            (logs.isClock || !logs.isClock) && (!logs.isBreak || logs.isBreak)
          ">
        </mat-slide-toggle>
      </td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head" mat-sort-header>Status</th>
      <td mat-cell class="table_detail" *matCellDef="let logs">
        <!-- If status are display using clockin action -->
        <span class="badge" [ngClass]="logs.workData ? logs.workData.clockIn ? 'present' : 'absent' : 'absent'">{{
          logs.workData ? logs.workData.clockIn ? 'present' : 'absent' : 'absent' }}</span>
      </td>
    </ng-container>
    <ng-container matColumnDef="regularize">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head">
        Regularize
      </th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        {{ logs.regularize }}
      </td>
    </ng-container>
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head" mat-sort-header>Action</th>
      <td mat-cell *matCellDef="let logs" class="table_detail">
        <button matTooltip="View" matTooltipPosition="left" mat-icon-button class="view_icon"
          (click)="singleUser(logs)">
          <mat-icon>visibility</mat-icon>
        </button>
      </td>
    </ng-container>
    <ng-container matColumnDef="expand">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="table_head" aria-label="row actions">
        &nbsp;
      </th>
      <td mat-cell *matCellDef="let element" class="table_detail">
        <button matTooltip="Expand" matTooltipPosition="left" mat-icon-button aria-label="expand row"
          *ngIf="(element.workData ? element.workData.clockIn ? 'present' : 'absent' : 'absent') === 'present'"
          (click)="expandedElement = expandedElement === element ? null : element;$event.stopPropagation()">
          <mat-icon *ngIf="expandedElement !== element">keyboard_arrow_down</mat-icon>
          <mat-icon *ngIf="expandedElement === element">keyboard_arrow_up</mat-icon>
        </button>
      </td>
      <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
          <div class="example-element-detail" [@detailExpand]=" element === expandedElement ? 'expanded' : 'collapsed'">
            <div class="col-12" *ngIf="element.workLogs && element.workLogs.length">
              <ngx-mat-timeline position="start" orientation="horizontal" class="py-3">
                <ngx-mat-timeline-item *ngFor="let item of element.workLogs" [icon]="item.attendance_type">
                  <ng-template ngxMatTimelineItemIcon [ngSwitch]="item.attendance_type">
                    <mat-icon *ngSwitchCase="'clock_in'" class="rotate-45 approve">arrow_forward</mat-icon>
                    <mat-icon *ngSwitchCase="'start_break'" class="pending">fastfood</mat-icon>
                    <mat-icon *ngSwitchCase="'stop_break'" class="pending">history</mat-icon>
                    <mat-icon *ngSwitchCase="'clock_out'" class="rotate-45 reject">arrow_downward</mat-icon>
                  </ng-template>
                  <mat-card class="timeline-item">
                    <mat-card-content>
                      <p class="my-1 weight-500 font-one-two-halves">{{ (item.attendance_time | date:'HH:mm:ss') }}</p>
                      <!-- @note making changes added location will be applied when user start,stop break and clocked out.  -->
                      <p class="font-one">{{ item.attendance_type }}</p>
                      <p *ngIf="(item.attendance_type === 'clock_in' && item.attendance_url) || item.attendance_type === 'start_break' || item.attendance_type === 'stop_break' || item.attendance_type === 'clock_out'"
                        class="my-1 d-flex justify-content-center align-items-center">
                        <ngx-avatar class="theme_avatar" size="40" [round]="true" [src]="item.attendance_url"
                          (click)="openDialog('image', item.attendance_url)"></ngx-avatar>
                        <span *ngIf="item.lat && item.lng" class="pointer d-flex align-items-center"
                          (click)="openDialog('location', item.lat ? item.lat : '' , item.lng ? item.lng : '')">
                          <mat-icon>place</mat-icon>{{ getLocation(item.lat ? item.lat : '', item.lng ? item.lng : '')
                          }}</span>
                      </p>
                    </mat-card-content>
                  </mat-card>
                </ngx-mat-timeline-item>
              </ngx-mat-timeline>
            </div>
          </div>
        </td>
      </ng-container>
    </ng-container>
    <thead>
      <tr class="bg-gray" mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    </thead>
    <tbody>
      <tr mat-row *matRowDef="let client; columns: displayedColumns; let i = dataIndex" style="cursor: pointer"
        class="example-element-row" [class.example-expanded-row]="expandedElement === client"
        (click)="expandedElement = expandedElement === client ? null : client" placement="bottom"
        ngbTooltip="Click to view" triggers="hover" tooltipClass="tooltip-class"></tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']; let i = dataIndex"
        ng-repeat="logs in displayedColumns" class="example-detail-row"></tr>
    </tbody>
  </table>

</div>
<mat-paginator #myPaginator [pageSize]="pageSizeOptions[0]" [length]="length" [pageSizeOptions]="pageSizeOptions"
  (page)="onPaginateChange($event)" aria-label="Select page" class="form_paginator">
</mat-paginator>
<div class="nodata" *ngIf="!_loader && dataSource.length == 0">
  <img src="../../assets/images/no-data.svg" width="20%" alt="no data" />
  <h1>{{noDataMsg}}</h1>
</div>