<div class="p-sm-5 removeScrollBar">
  <h1 class="mat-dialog-title modal_title_custom light-underline">
    <mat-icon class="mr-1">add_circle</mat-icon>
    <span>  
      {{ modelTitle }}
    </span>
  </h1>
  <div *ngIf="data && !userProfile.length" class="d-flex justify-content-center">
    <div class="userProfile" style="position: relative; display: inline">
      <ngx-avatar class="theme_avatar profile_iamge" size="75"
        name="{{ data.first_name + ' ' + data.last_name }}"></ngx-avatar>
      <span style="bottom: 20px" class="addProfile" (click)="uploadProfilePic()">
        <mat-icon>create</mat-icon>
      </span>
    </div>
  </div>
  <div *ngIf="data && userProfile.length" class="d-flex justify-content-center">
    <div class="userProfile" style="position: relative; display: inline">
      <img class="profile_iamge" [src]="userProfile" />
      <span style="bottom: 0" class="addProfile" (click)="uploadProfilePic()">
        <mat-icon>create</mat-icon>
      </span>
    </div>
  </div>
  <input type="file" accept="image/*" style="display: none" #fileInput (change)="handleFileInput($event)" />
  <form [formGroup]="newUser">
    <div *ngIf="newUser">
      <div class="row">
        <div class="col-12 mb-2">
          <mat-form-field class="w-100">
            <input matInput placeholder="First Name" formControlName="first_name" type="text" required />
            <mat-error id="typeError">First Name is required.</mat-error>
          </mat-form-field>
        </div>
        <div class="col-12 mb-2">
          <mat-form-field class="w-100">
            <input matInput placeholder="Middle Name" formControlName="middle_name" type="text" required />
            <mat-error id="typeError">Middle Name is required.</mat-error>
          </mat-form-field>
        </div>
        <div class="col-12 mb-2">
          <mat-form-field class="w-100">
            <input matInput placeholder="Last Name" formControlName="last_name" type="text" required />
            <mat-error id="typeError">Last Name is required.</mat-error>
          </mat-form-field>
        </div>
        <div class="col-12 mb-2">
          <mat-form-field class="w-100">
            <input matInput placeholder="Employee ID" formControlName="employee_id" type="text" required />
            <mat-error id="typeError">Employee ID is required.</mat-error>
          </mat-form-field>
        </div>
        <div class="col-12 mb-2">
          <mat-form-field class="w-100">
            <input matInput placeholder="Email" formControlName="user_email" type="email" required />
            <mat-error id="typeError">Email is required.</mat-error>
          </mat-form-field>
        </div>
        <mat-form-field class="col-12 mb-2">
          <mat-label>Gender</mat-label>
          <mat-select formControlName="gender">
            <mat-option value="male">Male</mat-option>
            <mat-option value="female">Female</mat-option>
            <mat-option value="unspecified">Unspecified</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="col-12 mb-2">
          <mat-label>Type</mat-label>
          <mat-select formControlName="type">
            <mat-option *ngFor="let item of workingType" value="{{ item.type }}">
              {{ item.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="col-12 mb-2">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status">
            <mat-option *ngFor="let item of empStatus" style="text-transform: capitalize" value="{{ item.type }}">
              {{ item.type }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <div class="col-12 mb-2">
          <mat-form-field class="w-100">
            <input matInput placeholder="Hiring Date" formControlName="hiring_date" (input)="validateLogs($event)"
              type="date" required />
            <mat-error id="typeError">Date is required.</mat-error>
            <mat-error *ngIf="dateValid">
              Input should be in
              <strong><i>DD-MM-YYYY</i></strong> only.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-12 mb-2">
          <mat-form-field class="col-12 mb-2">
            <mat-label>Choose Reporting manager</mat-label>
            <mat-select formControlName="reporting_to">
              <mat-option *ngFor="let role of reportingManagerList" value="{{ role.user_id }}">
                {{ role.full_name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <!-- <div class="col-md-6 mb-2">
          <mat-form-field class="w-100">
            <input matInput placeholder="User Name" formControlName="userName" required />
            <mat-error id="typeError">Name is required.</mat-error>
          </mat-form-field>
        </div> -->
        <!-- this is used for adding a new user password-->
        <div class="col-12 mb-2 d-flex password-icon-modal">
          <button mat-stroked-button (click)="updateNew()" *ngIf="!isUpdatePswd && this.editUser">
            Set new password
          </button>
          <mat-form-field class="w-100" *ngIf="isUpdatePswd || !this.editUser">
            <input matInput placeholder="Password" formControlName="user_pass" [type]="hide ? 'password' : 'text'"
              required />
            <mat-icon matSuffix (click)="passwordVisibility()" *ngIf="hide">visibility_off</mat-icon>
            <mat-icon matSuffix (click)="passwordVisibility()" *ngIf="!hide">visibility</mat-icon>
            <mat-error id="typeError">Password is required.</mat-error>
          </mat-form-field>
        </div>
        <!-- this is used for reseting password of existing user-->
        <!-- <div *ngIf="editUser" class="col-md-6 mb-4 password-icon-modal">
          <button mat-raised-button class="col-md-12" color="primary" (click)="resetPassword()" [disabled]="isDisabled">
            <mat-icon>settings_backup_restore</mat-icon> Reset Password
          </button>
          <span class="alrtMsg" *ngIf="isDisabled">*Email Sent Successfully</span>
        </div> -->
        <!-- <div class="col-md-6 mb-2"> -->
        <!-- <mat-form-field class="w-100 col-md-6 mb-4">
                        <input matInput placeholder="Role" formControlName="role" required>

                        <mat-error id="typeError">Role is required.</mat-error>
                    </mat-form-field> -->
                    <mat-form-field class="col-12 mb-2">
                      <mat-label>Department</mat-label>
                      <mat-select formControlName="department">
                        <mat-option *ngFor="let item of department" value="{{ item.id }}">
                          {{ item.title }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
        <mat-form-field class="col-12 mb-2">
          <mat-label>Choose Role</mat-label>
          <mat-select formControlName="role">
            <mat-option *ngFor="let role of roleList" value="{{ role.id }}">
              {{ role.title }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <!-- </div> -->
      </div>
    </div>
    <div class="justify-content-center" *ngIf="isLoading">
      <app-loader></app-loader>
    </div>

    <div class="justify-content-center text-center mb-5" *ngIf="!isLoading">
      <button [disabled]="!newUser.valid" mat-raised-button class="cico-button" (click)="addUser()" type="submit">
        <mat-icon class="mr-1">save</mat-icon>Save
      </button>
    </div>
  </form>
</div>